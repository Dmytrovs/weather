import"./common.min.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();const h="bcc87287dcc2facd330fcba08ed41a8f",_=document.querySelector(".weather__block-search"),S=document.querySelector(".weather__input");document.querySelector(".weather__btn");const q=document.querySelector(".weather-details__condition"),C=document.querySelector(".weather__logo");C.addEventListener("click",()=>{location.reload()}),_.addEventListener("submit",async a=>{a.preventDefault();const r=S.value.trim();if(r){console.log("\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043D\u0430\u043F\u0438\u0441\u0430\u0432:",r);const o=await v(r);await u(o.lat,o.lon)}else console.log("\u041F\u0443\u0441\u0442\u0435 \u043F\u043E\u043B\u0435")});async function v(a){const o=await(await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${a}&limit=1&appid=${h}`)).json();console.log(o),console.log(o[0].lat);const t=o[0].lat;console.log(o[0].lon);const e=o[0].lon;return{lat:t,lon:e}}let i;async function u(a,r){const t=await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${a}&lon=${r}&appid=${h}&units=metric&lang=en`)).json();console.log(t),t.list[0].weather[0].main==="Snow"?i||(i=new Snow({showSnowflakes:!0,showSnowBalls:!0})):i&&(document.querySelectorAll(".snowflakes, .snowballs, .snowflake").forEach(y=>y.remove()),i=null);const e=t.list[0].weather[0].icon,n=`https://openweathermap.org/img/wn/${e}@2x.png`,c=`https://openweathermap.org/img/wn/${e}.png`,l=new Date(t.list[0].dt_txt);console.log(l);const d={weekday:"long"};console.log(d);const m=l.toLocaleDateString("en-US",d);console.log(m);const w={hour:"2-digit",minute:"2-digit",hour12:!1},g=l.toLocaleTimeString("uk-UA",w);console.log(g);const f={day:"2-digit",month:"long",year:"numeric"},p=l.toLocaleDateString("en-GB",f);console.log(p),document.querySelector(".weather-widget__location").textContent=t.city.name,document.querySelector(".weather-widget__temperature").textContent=Math.round(t.list[0].main.temp)+"\xB0C ",document.querySelector(".weather-widget__datetime").textContent=`${g} - ${m}
${p}`,document.querySelector(".weather-details__value--max").textContent=Math.round(t.list[0].main.temp_max)+"\xB0C ",document.querySelector(".weather-details__value--min").textContent=Math.floor(t.list[0].main.temp_min)+"\xB0C ",document.querySelector(".weather-details__value--feels").textContent=Math.round(t.list[0].main.feels_like)+"\xB0C ",document.querySelector(".weather-details__value-humadity").textContent=Math.round(t.list[0].main.humidity)+"%",document.querySelector(".weather-details__value-wind").textContent=Math.round(t.list[0].wind.speed)+" m/s",document.querySelector(".weather-details__value-cloudy").textContent=t.list[0].clouds.all+"%",document.querySelector(".weather-details__condition").textContent=t.list[0].weather[0].description,document.querySelector(".weather-widget__icon").src=n;const s=document.createElement("img");s.src=c,console.log(s),q.append(s)}u(),document.querySelector(".weather__geoBtn").addEventListener("click",()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{const r=a.coords.latitude,o=a.coords.longitude;u(r,o)},a=>{document.querySelector(".weather__output").textContent="Failed to get geolocation:"+a.message}):document.querySelector(".weather__output").textContent="Your browser does not support geolocation"});
